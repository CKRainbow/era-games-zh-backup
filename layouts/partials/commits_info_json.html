{{ $GameRepoId := . }}
{{ $GameRepoBaseUrl := add "https://gitgud.io/api/v4/projects/" $GameRepoId}}
{{ $GameCommitInfoUrl := add $GameRepoBaseUrl "/repository/commits"}}
{{ $ACCESS_TOKEN := os.Getenv "HUGO_GITGUD_ACCESS_TOKEN"}}
{{ $opt := dict 
	"headers" (dict "PRIVATE-TOKEN" $ACCESS_TOKEN)
}}

{{ with resources.GetRemote $GameCommitInfoUrl $opt}}
	{{ with .Err }}
		{{ errorf "%s" .}}
	{{ else }}
		{{ $result := . | transform.Unmarshal }}
	{{ end }}
{{ else }}
	{{ errorf "Unable to get remote resource %q" $GameCommitInfoUrl }}
{{ end }}
{{ if ne $result nil }}
	{{ return $result }}
{{ end }}
